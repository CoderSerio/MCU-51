C51 COMPILER V9.60.0.0   MAIN                                                              06/03/2022 13:10:47 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\COMPILE\KILE\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg52.h"
   2          #include "intrins.h"
   3          
   4          typedef unsigned char u8;
   5          typedef unsigned int u16;
   6          typedef unsigned long int u32;
   7          
   8          u8 leds = 0xfe;
   9          
  10          
  11          // ԭ
  12          // ʱ/ܼһ壩,Ϊ8λ͵8λ 8λTHx8λTLxxΪ01
  13          //  TMODǶʱ/ĹʽĴ
  14          //  TCONƼĴ
  15          //
  16          //  TMODΪ4λT0͵4λT1T0T1ǵ4λGATEC/TM1M0
  17          //      GATEΪ0ʱⲿжԴźŵӰ죬ʱTCONTR0TR1Ϊ1ʱ
  18          //      GATEΪ1TR0TR1Ϊ1֮⣬ҪINT0INT1Ϊ1ſ
  19          //      C/T ѡʱǼ0Ϊʱ
  20          //      M1M0ֹʽ  0013λʱ01:16λʱ10:8λԶװʱ11
             -8λʱ
  21          //  TCONΪ4λTH4λTLֱƶʱ/ж  ⲿжϣû֮ǰдǸ
  22          
  23          void initTimer0()
  24          {
  25   1        // Ĳ
  26   1        // 1. TMODֵȷT0 T1ʽ16λʱ
  27   1        //  ûӰλ
  28   1        TMOD |= 0x01; 
  29   1        // 2. ֵдTH0 TL0TH1 TL1
  30   1        // ھƵ12MhzоƬ趨1msҪֵΪFC18ֵǹ̶ģϾûвԹֵֻ
             -
  31   1        TH0 = 0xFC;
  32   1        TL0 = 0x18;
  33   1        // 3. ж
  34   1        ET0 = 1;
  35   1        EA = 1;
  36   1        // 4. TR0TR1ʱ
  37   1        TR0 = 1;
  38   1      }
  39          
  40          void main()
  41          {
  42   1        initTimer0();
  43   1        while(1);
  44   1      }
  45          
  46          void timer0() interrupt 1
  47          {
  48   1        // ںڲһõıiܶǸ˼ǲ...
  49   1        static u16 i = 0;
  50   1        // ΪõĹʽ16λʱһκ󲢲ԶװҪֶ
  51   1        // װֲ֮жϣȻװ...γѭ
  52   1        TH0 = 0xFC;
C51 COMPILER V9.60.0.0   MAIN                                                              06/03/2022 13:10:47 PAGE 2   

  53   1        TL0 = 0x18;
  54   1        
  55   1        i++;
  56   1        // ķѵʱ䣬1msĶʱִ1000εʱ1s
  57   1        if(i == 1000) 
  58   1        {
  59   2          i = 0;
  60   2          P1 = leds;
  61   2          leds = _crol_(leds, 1);
  62   2        }
  63   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     85    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
