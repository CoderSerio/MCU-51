C51 COMPILER V9.60.0.0   MAIN                                                              06/03/2022 15:21:34 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: E:\COMPILE\KILE\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings
                    -\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "reg51.h"
   2          #include "intrins.h"
   3          
   4          typedef unsigned char u8;
   5          typedef unsigned int u16;
   6          typedef unsigned long int u32;
   7          
   8          void delay(u32 time)
   9          {
  10   1        while(time --);
  11   1      }
  12          
  13          void initSerial()
  14          {
  15   1        
  16   1        // ȻĲߣͶʱж 
  17   1        // 1. ȷTMODT1Ĺʽ(T1Ĺʽ2, 10: 8λԶװʱ)
  18   1        TMOD |= 0x20;
  19   1        // 2. T1ĳֵҪвԣȡF3λװдһ
  20   1        TH1 = 0xFE;
  21   1        TH0 = 0xFE;
  22   1        // 3. T1
  23   1        TR1 = 1; 
  24   1        // 4. ȷпڿơPCONһλǹSMODʱλģΪ1Ǳ0
  25   1        //PCONʵҲû㶮ʲô˼ڶTHȡֵǿֻҪһλ
             -ˣȡ1
  26   1        // SCONʽ/ͿƵȵȣ6 7λΪSM1SM0 
  27   1        //    00 λĴ 01: 10λ첽շ(8λݣʿɱ) 10: 11λ첽շ; 11:11λ첽շ(
             -ʿɱ)
  28   1        PCON = 0x80;
  29   1        SCON = 0x50;
  30   1        ES = 1; // ж
  31   1        EA = 1;
  32   1        
  33   1        
  34   1      
  35   1      }
  36          
  37          void main()
  38          {
  39   1        initSerial();
  40   1        while(1);
  41   1      }
  42          
  43          void serial() interrupt 4
  44          {
  45   1        // գString Buffer
  46   1        // SBUFһc洢ͨݵļĴ
  47   1        u8 res = SBUF;
  48   1        // ɺӲὫRIжϿλΪ1ʾϣҪ0
  49   1        RI = 0;
  50   1        
  51   1        
  52   1        // (ûʲô÷ľԭȥ...)
C51 COMPILER V9.60.0.0   MAIN                                                              06/03/2022 15:21:34 PAGE 2   

  53   1        // SBUFУз
  54   1        SBUF = res;
  55   1        // ɺӲὫTIжϿλΪ1ʾϣҪ0
  56   1        while(!TI);
  57   1        TI = 0;
  58   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     72    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
